sadly, this attractive solution does'nt work correctly—line events come only after hitting \n, ie, all the alternatives are missed (see unicode.org/reports/tr18/#Line_Boundaries). #2, data after the last \n is silently ignored (see stackoverflow.com/questions/18450197/…). i'd call this solution dangerous cause it works for 99% of all files and for 99% of the data but fails silently for the rest. whenever you do fs.writeFileSync( path, lines.join('\n')) you've written a file that will only be partly read by above solution. –  fl